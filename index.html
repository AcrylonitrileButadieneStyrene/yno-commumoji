<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YNO Commumojis Viewer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 24px;
            background-color: oklch(21% 0.006 285.885);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;

            font-family: "Zen Kaku Gothic New", sans-serif;
            font-weight: 400;
            font-style: normal;
        }

        div {
            display: grid;
            width: fit-content;
            grid-template-areas: "name" "image" "author";
            grid-template-columns: 192px;
            grid-template-rows: auto 128px auto;
            gap: 8px;

            background-color: oklch(27.9% 0.041 260.031);
            padding: 16px;
            border: solid 2px oklch(37.2% 0.044 257.287);
            border-radius: 16px;
        }

        span {
            color: oklch(80.9% 0.105 251.813);
            text-align: center;
        }

        img {
            max-width: 128px;
            max-height: 128px;
            margin: auto;
        }

        .name,
        .author {
            color: oklch(93.2% 0.032 255.585);
        }
    </style>
    <script>
        const template = new Promise(res => window.addEventListener("load", res, { once: true }))
            .then(() => document.getElementById("template"));
        const entries = fetch("config.csv")
            .then(resp => resp.text())
            .then(text => text.split("\n")
                .map(line => line.split(","))
                .filter(line => line.length >= 2)
                .sort(([a], [b]) => a > b)
            );
        Promise.all([template, entries])
            .then(([template, entries]) => {
                for (const [name, url, author] of entries) {
                    const node = document.importNode(template.content, true);
                    node.querySelector(".name").textContent = name;
                    node.querySelector("img").src = url;
                    node.querySelector(".author").textContent = author;
                    document.body.appendChild(node);
                }
            })
    </script>
</head>

<body>
    <template id="template">
        <div>
            <span>:<span class="name">Name</span>:</span>
            <img>
            <span>by <span class="author">Author</span></span>
        </div>
    </template>
</body>

</html>